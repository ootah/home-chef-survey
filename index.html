<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honoring Our Home Chefs | Culinary Survey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        h1, h2, h3, .playfair {
            font-family: 'Playfair Display', serif;
        }
        .bg-warm {
            background-color: #FDF8F5;
        }
        .text-earthy {
            color: #5D4037;
        }
        .btn-warm {
            background-color: #D84315;
            transition: all 0.3s ease;
        }
        .btn-warm:hover {
            background-color: #BF360C;
            transform: translateY(-2px);
        }
        .card-shadow {
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        #loading-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #D84315;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .sparkle-btn {
            background: linear-gradient(90deg, #D84315, #FF7043);
            border: none;
            color: white;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        .sparkle-btn:active {
            transform: scale(0.98);
        }
        .sparkle-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .motivation-gradient {
            background: linear-gradient(135deg, #FFF5F1 0%, #FFEDD5 100%);
        }
        .hidden-section {
            display: none !important;
        }
    </style>
</head>
<body class="bg-warm text-gray-800">

    <div id="loading-overlay">
        <div class="spinner mb-4"></div>
        <p id="loading-text" class="text-earthy font-medium">Processing your request...</p>
    </div>

    <!-- Hero Section -->
    <header class="relative bg-white overflow-hidden border-b border-orange-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                    <div class="sm:text-center lg:text-left">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                            <span class="block text-earthy xl:inline">The Greatest Chefs in the World</span>
                            <span class="block text-orange-600 xl:inline"> Are Home Makers</span>
                        </h1>
                        <p class="mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                            Honoring the culinary experts who nourish our families every single day. Your expertise is the heart of our culture, and your skills are world-class.
                        </p>
                        <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                            <div class="rounded-md shadow">
                                <a href="#survey" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white btn-warm md:py-4 md:text-lg md:px-10">
                                    Respond to the Survey
                                </a>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2">
            <!-- Looking for HM_Image.jpg in the same folder. 
                 If you are running this locally, ensure index.html and HM_Image.png 
                 are both inside C:\Users\Herald\Documents\MyImage\ -->
            <img id="hero-image" class="h-56 w-full object-cover sm:h-72 md:h-96 lg:w-full lg:h-full" 
                 src="HM_Image.png" 
                 onerror="this.src='https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&q=80&w=1200'" 
                 alt="Home Maker in the Kitchen">
        </div>
    </header>

    <!-- Motivational Section -->
    <section class="py-16 motivation-gradient border-y border-orange-100">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="inline-block p-2 px-4 rounded-full bg-orange-100 text-orange-700 text-sm font-bold tracking-widest uppercase mb-4">
                Inspire the World
            </div>
            <h2 class="text-4xl font-bold text-earthy mb-6">Your Recipes are a Legacy</h2>
            <p class="text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed">
                That pinch of salt, that special way you sautÃ© the spices, and the love you pour into every ladleâ€”these aren't just steps; they are <span class="text-orange-600 font-bold">masterpieces</span>. By sharing your tasty recipes, you aren't just giving a dish, you are sharing a piece of your heart and keeping traditions alive for generations to come.
            </p>
        </div>
    </section>

    <!-- Purpose Section -->
    <section class="py-16 bg-warm">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-earthy mb-6">Our Purpose</h2>
                <p class="text-lg text-gray-600 leading-relaxed italic mb-8">
                    "This survey aims to celebrate and understand the vast culinary talent within Indian households."
                </p>
            </div>
            <div class="grid md:grid-cols-3 gap-8 text-center">
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-orange-200">
                    <div class="text-orange-600 mb-3 flex justify-center">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-2">Understand Skills</h3>
                    <p class="text-sm text-gray-500">Mapping the incredible variety of dishes and styles mastered by homemakers.</p>
                </div>
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-orange-200">
                    <div class="text-orange-600 mb-3 flex justify-center">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-2">Empower Entrepreneurs</h3>
                    <p class="text-sm text-gray-500">Exploring the potential for home-based cooking businesses and financial independence.</p>
                </div>
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-orange-200">
                    <div class="text-orange-600 mb-3 flex justify-center">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-2">Connect Communities</h3>
                    <p class="text-sm text-gray-500">Gauging interest in accessing authentic, home-cooked food services.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Survey Section -->
    <section id="survey" class="py-16 bg-white">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <div id="survey-main-container" class="bg-orange-50 rounded-2xl p-8 mb-8 border border-orange-100 min-h-[400px] flex flex-col justify-center">
                
                <div id="success-view" class="hidden text-center py-10">
                    <div class="text-6xl mb-6 text-green-500">âœ…</div>
                    <h2 class="text-3xl font-bold text-earthy mb-4">Thank You So Much!</h2>
                    <p class="text-lg text-gray-600 mb-8">You have already shared your culinary expertise with us. Your passion helps us celebrate the incredible skill of home makers across the nation.</p>
                    <div class="p-4 bg-white rounded-lg italic text-orange-700 font-medium">
                        "The kitchen is where the heart is, and we've safely received your heart's story."
                    </div>
                    <button onclick="clearSubmissionForTesting()" class="mt-10 text-xs text-gray-400 underline hover:text-gray-600">Admin: Clear status (Testing only)</button>
                </div>

                <div id="form-view">
                    <h2 class="text-2xl font-bold text-earthy mb-6">Share Your Journey With Us</h2>

                    <form id="cooking-survey" class="space-y-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                <input type="text" name="name" id="user-name" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                <input type="tel" name="phone" id="user-phone" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Street / Area Name</label>
                            <input type="text" name="area" id="user-area" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500">
                        </div>

                        <div class="space-y-3">
                            <label class="block text-sm font-medium text-gray-700">Which food or dish do you master in cooking?</label>
                            <input type="text" id="master-dish" name="dish" placeholder="e.g., Traditional Biryani, Puran Poli..." required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500">
                            
                            <button type="button" onclick="generateFlavorInsight()" class="sparkle-btn w-full px-4 py-2.5 rounded-md font-bold text-sm shadow-sm">
                                âœ¨ Get Flavor Insight
                            </button>
                            
                            <div id="dish-insight-container" class="mt-3 hidden">
                                <div class="p-4 bg-white border border-orange-200 rounded-lg shadow-md">
                                    <p id="dish-insight-text" class="text-sm italic text-gray-700 mb-2"></p>
                                    <div class="pt-2 border-t border-orange-100 flex items-start gap-2">
                                        <span class="text-orange-600 font-bold">ðŸ“ˆ Opportunity:</span>
                                        <p id="dish-market-text" class="text-xs font-semibold text-orange-800 uppercase tracking-wider mt-0.5"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Are you interested in starting a home-based cooking business?</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3 text-sm text-gray-700">
                                    <input type="radio" name="entrepreneur" value="Yes" required class="text-orange-600 focus:ring-orange-500">
                                    <span>Yes, I would love to</span>
                                </label>
                                <label class="flex items-center space-x-3 text-sm text-gray-700">
                                    <input type="radio" name="entrepreneur" value="Maybe" class="text-orange-600 focus:ring-orange-500">
                                    <span>Maybe, I'm thinking about it</span>
                                </label>
                                <label class="flex items-center space-x-3 text-sm text-gray-700">
                                    <input type="radio" name="entrepreneur" value="No" class="text-orange-600 focus:ring-orange-500">
                                    <span>No, I prefer cooking for my family only</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">What are you primarily looking for?</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3 text-sm text-gray-700">
                                    <input type="radio" name="primary_goal" value="Entrepreneur" required class="text-orange-600 focus:ring-orange-500">
                                    <span>I want to become a home-cook entrepreneur</span>
                                </label>
                                <label class="flex items-center space-x-3 text-sm text-gray-700">
                                    <input type="radio" name="primary_goal" value="Consumer" class="text-orange-600 focus:ring-orange-500">
                                    <span>I am looking to collaborate with other entrepreneurs</span>
                                </label>
                            </div>
                        </div>

                        <div class="pt-4">
                            <p class="text-[10px] text-gray-500 leading-relaxed mb-4 px-1 text-justify">
                                <strong>Data Privacy:</strong> Your information is safe. We use responses only to assess your interest in entrepreneurship, shortlist participants, and contact you if needed. Your data will be used only for this purpose, will not be sold or shared for marketing, and will be accessed only by authorized personnel. By submitting this form, you consent to the use of your personal data in line with Indiaâ€™s Digital Personal Data Protection Act, 2023.
                            </p>
                            <button type="submit" class="w-full py-4 rounded-xl text-white btn-warm font-bold text-lg shadow-lg">
                                Submit My Responses
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-earthy text-white py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-lg font-bold mb-4">Honoring the Hands that Feed Us</p>
            <p class="text-gray-400 text-xs">Â© 2024 Home Chef Empowerment Initiative. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const apiKey = "";
        const GEMINI_MODEL = "gemini-2.5-flash-preview-09-2025";
        
        const googleSheetUrl = "https://script.google.com/macros/s/AKfycbzpmbOJkhwNIiSB3oV3lUuXaPwL3mGyGrWaMztJwI_GGXt0zs0-IOMM4-Q6Sfr-HIYf/exec"; 

        async function fetchGemini(model, payload) {
            let retries = 5;
            let delay = 1000;
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
            
            while (retries > 0) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error('API request failed');
                    return await response.json();
                } catch (err) {
                    retries--;
                    if (retries === 0) throw err;
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
        }

        async function generateFlavorInsight() {
            const dish = document.getElementById('master-dish').value;
            if (!dish) {
                alert("Please enter a dish first!");
                return;
            }

            const loader = document.getElementById('loading-overlay');
            const loadText = document.getElementById('loading-text');
            const insightContainer = document.getElementById('dish-insight-container');
            const insightText = document.getElementById('dish-insight-text');
            const marketText = document.getElementById('dish-market-text');
            
            loadText.innerText = "âœ¨ Analyzing the legacy of your dish...";
            loader.style.display = 'flex';

            try {
                const prompt = `Based on the dish "${dish}", provide two distinct pieces of information in a JSON object format with keys "insight" and "market". 
                "insight": One short, inspiring sentence about why this dish is a cultural or emotional masterpiece in an Indian home.
                "market": One very short phrase (max 10 words) describing the massive demand or business opportunity for this specific dish.`;

                const data = await fetchGemini(GEMINI_MODEL, {
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { responseMimeType: "application/json" }
                });

                const result = JSON.parse(data.candidates?.[0]?.content?.parts?.[0]?.text);
                if (result) {
                    insightText.innerText = result.insight;
                    marketText.innerText = result.market;
                    insightContainer.classList.remove('hidden');
                }
            } catch (err) {
                console.error("Insight generation failed", err);
            } finally {
                loader.style.display = 'none';
            }
        }

        function checkSubmissionStatus() {
            const hasSubmitted = localStorage.getItem('chef_survey_complete');
            if (hasSubmitted === 'true') {
                document.getElementById('form-view').classList.add('hidden-section');
                document.getElementById('success-view').classList.remove('hidden');
            }
        }

        function clearSubmissionForTesting() {
            localStorage.removeItem('chef_survey_complete');
            location.reload();
        }

        window.onload = () => {
            checkSubmissionStatus();

            const form = document.getElementById('cooking-survey');
            form.onsubmit = async (e) => {
                e.preventDefault();
                const loader = document.getElementById('loading-overlay');
                const loadText = document.getElementById('loading-text');
                loadText.innerText = "Saving your details to Google Sheets...";
                loader.style.display = 'flex';

                const formData = new FormData(form);
                const payload = Object.fromEntries(formData.entries());

                try {
                    await fetch(googleSheetUrl, {
                        method: 'POST',
                        mode: 'no-cors', 
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    localStorage.setItem('chef_survey_complete', 'true');
                    loader.style.display = 'none';
                    checkSubmissionStatus();
                } catch (err) {
                    console.error("Submission error:", err);
                    loader.style.display = 'none';
                    alert('Submission error. Check script deployment.');
                }
            };
        };
    </script>
</body>
</html>

